---
title: Using Nmap
keywords: nmap, ip, address, api, services
last_updated: September 2020
summary: "How to use nmap to scan your network"
sidebar: main_sidebar
permalink: use_nmap.html
---

## Installing Nmap

Nmap ("Network Mapper") is a free and open source utility for network discovery and security auditing. Many systems and network administrators also find it useful for tasks such as network inventory, managing service upgrade schedules, and monitoring host or service uptime.

You can find all the documentation in its official site [Nmap](https://nmap.org/) and instructions for how to download based on your environment [download](https://nmap.org/download.html)

## Usage

Nmap offers a wide range of utilities and commands, such as Port scanning, Host discovery, Service and version detection to name a few. Here some basic examples for how to do some nmap scanning.

_NB: Some commands required sudo privilege._

- Target Specification

```
nmap 192.168.1.1                    # Scan a single IP

nmap 192.168.1.1 192.168.2.1        # Scan specific IPs

nmap 192.168.1.1-254                # Scan a range

```

- Scan Techniques

```
nmap 192.168.1.1 -sS                # TCP SYN port scan (Default)

nmap 192.168.1.1 -sT                # TCP connect port scan (Default without root privilege)

nmap 192.168.1.1 -sU                # UDP port scan

```

- Host Discovery

```
nmap 192.168.1.1-3 -sL              # No Scan. List targets only

nmap 192.168.1.1/24 -sn             # Disable port scanning. Host discovery only.

nmap 192.168.1.1-5 -Pn              # Disable host discovery. Port scan only.
```

- Service and Version detection

```
nmap 192.168.1.1 -sV                # Attempts to determine the version of the service running on port

nmap 192.168.1.1 -A                 # Enables OS detection, version detection, script scanning, and traceroute

```

- OS Detection

```
nmap 192.168.1.1 -O                 # Remote OS detection using TCP/IP stack fingerprinting

nmap 192.168.1.1 -O --osscan-guess  # Makes Nmap guess more aggressively

```

- Capture Nmap output

```
nmap 192.168.1.1 -oN normal.file    # Normal output to the file normal.file

nmap 192.168.1.1 -oX xml.file       # XML output to the file xml.file

nmap 192.168.1.1 -oG grep.file      # Grepable output to the file grep.file

```

## Integrating Tidal-Tools

By leveraging the power of **Tidal-Tools** you can send the output generated by Nmap to Tidal migration API.

In order for **tidal-tools** to be able to parse and handle the request you must save the Nmap output as XML.

```
tidal analyze nmap <filename.XML>
```

## API Endpoint

Alternatively, you can manually send the data collected by Nmap to the API by using a service like Postman. The downsize of this approach is that you will have to create the expected JSON payload required by the API to handle the request.

You will want to use this API endpoint

` POST /nmap`

Detailed instructions for how to use Postman for authentication and CRUD operations can be found [here]()

- You will want to use this API endpoint:

  `GET /ip_addresses`

This is the shape of the expected payload.

```
{
  "nmap_output": {
    "hosts": [
      {
        "ip_address" : "192.199.2.33",
        "ports": [
          {
            "port": 22,
            "protocol": "tcp",
            "status": "open",
            "service": {
              "name": "openssh",
              "cves": [
                {
                  "id":"cve-2007-6570",
                   "state": "LIKELY VULNERABLE"
                }
              ]
            }
          }
        ]
      }
    ]
  }
}
```

A full request via cURL would look similar to this:

```
export API_TOKEN=PUT_YOUR_TOKEN_HERE
export SUBDOMAIN=PUT_YOUR_SUBDOMAIN_HERE

curl -H "Authorization: Bearer $API_TOKEN"  --header "Content-Type: application/json" \
--request POST \
--data nmap_out.json \
"https://$SUBDOMAIN.tidalmg.com/api/v1/nmap"
```

### Using the API

If you haven't used the API yet or need a quick refresh, you [should get setup first](/api_getting_started.html).
